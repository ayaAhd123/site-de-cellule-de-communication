<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Club Communication CMC</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="admin.css">
    <!-- Cropper.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css">
</head>

<body>
    <div class="admin-container">
        <!-- Login Section -->
        <div id="login-section" class="login-section">
            <div class="login-box">
                <center>
                    <form id="login-form" class="login-form">
                        <div class="form-group">
                            <center>
                                <label for="admin-password">
                                    <pre style="font-size: 20px;">ùêåùê®ùê≠ ùêùùêû ùê©ùêöùê¨ùê¨ùêû:</pre>
                                </label>
                                <div class="input-wrapper" style="display:inline-block; position:relative;">
                                    <input type="password" id="admin-password" placeholder="Entrez le mot de passe">
                                    <span id="admin-pass-toggle" class="password-toggle"
                                        title="Afficher/masquer le mot de passe">üëÅÔ∏è</span>
                                </div>
                            </center>
                        </div><br><br>
                        <button type="submit" class="submit-button">Se connecter</button>
                        <p id="login-error" class="error-message"></p>
                    </form>
                    <a href="index.html" class="back-link">‚Üê Retour au site</a>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="admin-dashboard" style="display: none;">
            <nav class="admin-nav">
                <h2> Tableau de Bord</h2>
                <div>
                    <a href="index.html" class="back-link">‚Üê Retour au site</a>
                    <button id="change-pass-btn" class="back-link">üîí Changer le mot de passe</button>
                    <button id="logout-btn" class="logout-btn">D√©connexion</button>
                </div>
            </nav>

            <!-- Change password panel -->
            <div id="change-password-panel" style="display:none;" class="change-pass-panel container">
                <h3>Changer le mot de passe</h3>
                <form id="change-password-form" class="change-password-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="current-pass">Mot de passe actuel</label>
                            <div style="position:relative;">
                                <input type="password" id="current-pass" required>
                                <span class="password-toggle" data-target="current-pass"
                                    title="Afficher/masquer">üëÅÔ∏è</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="new-pass">Nouveau mot de passe</label>
                            <div style="position:relative;">
                                <input type="password" id="new-pass" required>
                                <span class="password-toggle" data-target="new-pass" title="Afficher/masquer">üëÅÔ∏è</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="confirm-pass">Confirmer le nouveau</label>
                            <div style="position:relative;">
                                <input type="password" id="confirm-pass" required>
                                <span class="password-toggle" data-target="confirm-pass"
                                    title="Afficher/masquer">üëÅÔ∏è</span>
                            </div>
                        </div>
                    </div>
                    <div style="display:flex;gap:1rem;align-items:center;margin-top:1rem;">
                        <button type="submit" class="submit-button">Enregistrer</button>
                        <button type="button" id="cancel-change" class="back-link">Annuler</button>
                        <p id="change-pass-msg" style="margin:0 0 0 1rem;font-weight:600;"></p>
                    </div>
                </form>
            </div>
            <div class="admin-content">
                <div class="stats-overview">
                    <div class="stat-box">
                        <h3 id="total-registrations">0</h3>
                        <p>Inscriptions totales</p>
                    </div>
                    <div class="stat-box">
                        <h3 id="total-events">0</h3>
                        <p>√âv√©nements</p>
                    </div>
                    <div class="stat-box">
                        <h3 id="total-members">0</h3>
                        <p>Membres</p>
                    </div>
                </div>

                <!-- Gestion des √âv√©nements -->
                <div class="management-section">
                    <h3>üì∏ Gestion des √âv√©nements</h3>
                    <form id="event-form" class="management-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-name">Nom de l'√©v√©nement *</label>
                                <input type="text" id="event-name" required>
                            </div>
                            <div class="form-group">
                                <label for="event-description">Description *</label>
                                <textarea id="event-description" required rows="3"></textarea>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="event-photo">Photo de l'√©v√©nement *</label>
                                <input type="file" id="event-photo" accept="image/*" required>
                                <div id="event-photo-preview" class="file-preview"></div>
                            </div>
                            <div class="form-group">
                                <label for="event-video">Vid√©o (optionnelle)</label>
                                <input type="file" id="event-video" accept="video/*">
                                <div id="event-video-preview" class="file-preview"></div>
                            </div>
                        </div>
                        <div id="event-upload-progress" class="upload-progress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <p class="progress-text">Upload en cours...</p>
                        </div>
                        <button type="submit" class="submit-button">
                            <span id="event-btn-text">‚ûï Ajouter l'√©v√©nement</span>
                        </button>
                        <p id="event-message" class="form-message"></p>
                    </form>

                    <div class="table-container">
                        <h4>Liste des √âv√©nements</h4>
                        <div class="table-wrapper">
                            <table id="events-table">
                                <thead>
                                    <tr>
                                        <th>Photo</th>
                                        <th>Nom</th>
                                        <th>Description</th>
                                        <th>Vid√©o</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="events-table-body">
                                    <!-- Donn√©es dynamiques -->
                                </tbody>
                            </table>
                        </div>
                        <p id="no-events-message"
                            style="display: none; text-align: center; padding: 1rem; color: #666;">
                            Aucun √©v√©nement enregistr√©.
                        </p>
                    </div>
                </div>

                <!-- Gestion des Membres -->
                <div class="management-section">
                    <h3>üë• Gestion des Membres</h3>
                    <form id="member-form" class="management-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="member-name">Nom complet *</label>
                                <input type="text" id="member-name" required>
                            </div>
                            <div class="form-group">
                                <label for="member-role">R√¥le dans la cellule *</label>
                                <input type="text" id="member-role" required placeholder="Ex: Responsable Vid√©o">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="member-description">Description *</label>
                                <textarea id="member-description" required rows="3"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="member-photo">Photo *</label>
                                <input type="file" id="member-photo" accept="image/*" required>
                                <div id="member-photo-preview" class="file-preview"></div>
                            </div>
                        </div>
                        <div id="member-upload-progress" class="upload-progress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <p class="progress-text">Upload en cours...</p>
                        </div>
                        <button type="submit" class="submit-button">
                            <span id="member-btn-text">‚ûï Ajouter le membre</span>
                        </button>
                        <p id="member-message" class="form-message"></p>
                    </form>

                    <div class="table-container">
                        <h4>Liste des Membres</h4>
                        <div class="table-wrapper">
                            <table id="members-table">
                                <thead>
                                    <tr>
                                        <th>Photo</th>
                                        <th>Nom</th>
                                        <th>R√¥le</th>
                                        <th>Description</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="members-table-body">
                                    <!-- Donn√©es dynamiques -->
                                </tbody>
                            </table>
                        </div>
                        <p id="no-members-message"
                            style="display: none; text-align: center; padding: 1rem; color: #666;">
                            Aucun membre enregistr√©.
                        </p>
                    </div>
                </div>

                <!-- Gestion des Inscriptions -->
                <div class="table-container">
                    <h3>Liste des Inscriptions</h3>
                    <div class="table-actions">
                        <input type="text" id="search-input" placeholder="üîç Rechercher...">
                        <button id="export-btn" class="export-btn">üì• Exporter CSV</button>
                    </div><br><br>
                    <div class="table-wrapper">
                        <table id="registrations-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Nom</th>
                                    <th>Pr√©nom</th>
                                    <th>Fili√®re</th>
                                    <th>Ann√©e</th>
                                    <th>T√©l√©phone</th>
                                    <th>Email</th>
                                    <th>Int√©r√™t</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="table-body">
                                <!-- Donn√©es dynamiques -->
                            </tbody>
                        </table>
                    </div>
                    <p id="no-data-message" style="display: none; text-align: center; padding: 2rem; color: #666;">
                        Aucune inscription enregistr√©e.
                    </p>
                </div>
            </div>

            <!-- Modal pour modifier un √©v√©nement -->
            <div id="edit-event-modal" class="modal">
                <div class="modal-content">
                    <span class="close-modal" data-modal="edit-event-modal">&times;</span>
                    <h3>Modifier l'√©v√©nement</h3>
                    <form id="edit-event-form">
                        <input type="hidden" id="edit-event-id">
                        <div class="form-group">
                            <label for="edit-event-name">Nom de l'√©v√©nement *</label>
                            <input type="text" id="edit-event-name" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-event-description">Description *</label>
                            <textarea id="edit-event-description" required rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="edit-event-photo">Nouvelle photo (laisser vide pour garder l'actuelle)</label>
                            <input type="file" id="edit-event-photo" accept="image/*">
                            <div id="edit-event-photo-preview" class="file-preview"></div>
                        </div>
                        <div class="form-group">
                            <label for="edit-event-video">Nouvelle vid√©o (laisser vide pour garder l'actuelle)</label>
                            <input type="file" id="edit-event-video" accept="video/*">
                            <div id="edit-event-video-preview" class="file-preview"></div>
                        </div>
                        <div id="edit-event-progress" class="upload-progress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <p class="progress-text">Mise √† jour en cours...</p>
                        </div>
                        <button type="submit" class="submit-button">üíæ Enregistrer</button>
                        <p id="edit-event-message" class="form-message"></p>
                    </form>
                </div>
            </div>

            <!-- Modal pour modifier un membre -->
            <div id="edit-member-modal" class="modal">
                <div class="modal-content">
                    <span class="close-modal" data-modal="edit-member-modal">&times;</span>
                    <h3>Modifier le membre</h3>
                    <form id="edit-member-form">
                        <input type="hidden" id="edit-member-id">
                        <div class="form-group">
                            <label for="edit-member-name">Nom complet *</label>
                            <input type="text" id="edit-member-name" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-member-role">R√¥le *</label>
                            <input type="text" id="edit-member-role" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-member-description">Description *</label>
                            <textarea id="edit-member-description" required rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="edit-member-photo">Nouvelle photo (laisser vide pour garder l'actuelle)</label>
                            <input type="file" id="edit-member-photo" accept="image/*">
                            <div id="edit-member-photo-preview" class="file-preview"></div>
                        </div>
                        <div id="edit-member-progress" class="upload-progress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                            <p class="progress-text">Mise √† jour en cours...</p>
                        </div>
                        <button type="submit" class="submit-button">üíæ Enregistrer</button>
                        <p id="edit-member-message" class="form-message"></p>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Recadrage (Cropper) -->
    <div id="cropper-modal" class="modal">
        <div class="modal-content cropper-modal-content">
            <span class="close-modal" data-modal="cropper-modal">&times;</span>
            <h3 id="cropper-title">Recadrer l'image</h3>
            <div class="cropper-container">
                <img id="cropper-image" src="" alt="Image √† recadrer">
            </div>
            <div class="cropper-actions">
                <button type="button" class="back-link" id="cropper-cancel">Annuler</button>
                <div class="cropper-tools">
                    <button type="button" class="tool-btn" id="rotate-left" title="Pivoter √† gauche">‚Ü∫</button>
                    <button type="button" class="tool-btn" id="rotate-right" title="Pivoter √† droite">‚Üª</button>
                    <button type="button" class="tool-btn" id="zoom-in" title="Zoomer">+</button>
                    <button type="button" class="tool-btn" id="zoom-out" title="D√©zoomer">‚àí</button>
                </div>
                <button type="button" class="submit-button" id="cropper-save">Valider le recadrage</button>
            </div>
        </div>
    </div>

    <!-- Cropper.js JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js"></script>
    <script src="script.js"></script>
</body>

</html>